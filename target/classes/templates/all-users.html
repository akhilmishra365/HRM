<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Users</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>

    </style>
</head>
<body>
   	<div class="header">
        <h1>Admin Dashboard</h1>
        <div class="logout-button">
            <a th:href="@{/logout}">Logout</a>
        </div>
    </div>

    <div class="sidebar">
        <!-- <div class="profile"> -->
<!--             <img src="../static/img/Universal.jpg" th:src="@{/img/Universal.png}" alt="profile_picture">
 -->            <!-- <h3 th:text="${user.fullname}">User Fullname</h3> -->
                <!-- <h3 th:text="${user.id}">User ID</h3> -->
                <!-- <p th:text="${role}">User Role</p> -->
<!--         </div>
 -->        <ul class="list">
            <li><a href="/admin-page"><span class="icon"><i class="fas fa-home"></i></span> <span class="item">Home</span></a></li>
            <li><a href="#"><span class="icon"><i class="fas fa-user"></i></span> <span class="item">My Profile</span></a></li>
            <li><a href="/employee/all"><span class="icon"><i class="fas fa-users"></i></span> <span class="item">Employee</span></a></li>
            <li><a href="/admin/clockings"><span class="icon"><i class="fas fa-calendar-check"></i></span> <span class="item">Attendance</span></a></li>
            <li><a href="/admin/tickets"><span class="icon"><i class="fas fa-ticket-alt"></i></span> <span class="item">Tickets</span></a></li>
            <li><a href="/admin/reimbsFile"><span class="icon"><i class="fas fa-ticket-alt"></i></span> <span class="item">Reimbus</span></a></li>
            <li><a href="/all/users" class="active"> <span class="icon" ><i
									class="fas fa-users"></i></span> <span class="item item1" >Roles</span>
						</a></li>
            <li><a href="#"><span class="icon"><i class="fas fa-cog"></i></span> <span class="item">Settings</span></a></li>
        </ul>
    </div>
    <div class="main-content">
        <h2>User List</h2>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Full Name</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Role Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="user : ${users}">
                    <td th:text="${user.id}"></td>
                    <td th:text="${user.fullname}"></td>
                    <td th:text="${user.email}"></td>
                    <td th:text="${user.role}"></td>
                    <!-- <td>
                    <form class="edit-form" th:object="${user}" th:action="@{/users/update/{id}(id=${user.id})}" method="post">
                            <select th:field="*{role}">
                                <option th:value="USER" th:text="USER" th:selected="${user.role == 'USER'}"></option>
                                <option th:value="ADMIN" th:text="ADMIN" th:selected="${user.role == 'ADMIN'}"></option>
                            </select>
                            <button type="submit">Save</button>
                        </form>
                    </td> -->
                    <td>
                    <form class="edit-form" th:object="${user}" th:action="@{/update/{id}(id=${user.id})}" method="post">
                                <select class="form-control"
								id="role" name="role" th:value="${user.role}" required>
								<option value="ADMIN">ADMIN</option>
								<option value="MANAGER">MANAGER</option>
								<option value="USER">USER</option>
								</select>
								<button type="submit">Save</button>
                        </form>
                    </td>
                    <td th:text="${user.active ? 'Active' : 'Inactive'}"></td>
					<td>
						<form action="/activateUser" method="post"
							style="display: inline;">
							<input type="hidden" name="userId" th:value="${user.id}" />
							<button type="submit" th:if="${!user.active}">Activate</button>
						</form>
						<form action="/deactivateUser" method="post"
							style="display: inline;">
							<input type="hidden" name="userId" th:value="${user.id}" />
							<button type="submit" th:if="${user.active}">Deactivate</button>
						</form>
					</td>

				</tr>
            </tbody>
        </table>
    </div>
</body>
</html>
